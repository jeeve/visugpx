<div *ngIf="affichageOK" class="chart-container" (window:resize)="resize()">
  <div class="chart" #charttemplate></div>
  <svg id="controle-container" (click)="clickChart($event)" (mousemove)="mouseMove($event)" (mouseleave)="mouseLeave()">
    <svg *ngIf="visuStats">
      <svg *ngFor="let c of chutes" [attr.x]="X(ivmax)" y="10" width="10" height="6">
        <polygon points="0,0 10,0 5,5" fill="red" stroke="red"></polygon>
      </svg>
      <svg *ngFor="let v of vitesses; let i = index" class="indicateur plage"  [attr.x]="X(v.a)+3" y="10" [attr.width]="X(v.b)-X(v.a)+10" height="5">
        <line [attr.x1]="2" y1="0" x2="2" y2="5" [attr.stroke]="couleursStat[i]" stroke-width="3"></line>
        <line [attr.x1]="X(v.b)-X(v.a)" y1="0" [attr.x2]="X(v.b)-X(v.a)" y2="5" [attr.stroke]="couleursStat[i]" stroke-width="3"></line>
        <line [attr.x1]="2" y1="0" [attr.x2]="X(v.b)-X(v.a)" y2="0" [attr.stroke]="couleursStat[i]" stroke-width="3"></line>
      </svg>
    </svg>
    <svg *ngIf="visuChutes">
      <svg *ngFor="let c of chutes" [attr.x]="X(c)" y="10" width="10" height="6">
        <polygon points="0,0 10,0 5,5" fill="darkorange" stroke="darkorange"></polygon>
      </svg>
    </svg>
    <svg *ngIf="afficheFenetre">
      <rect x="30" y="10" [attr.width]="XFenetreGauche-25" height="135" stroke="#C0C0C0" stroke-width="0" fill-opacity="0.1" strock-opacity="0.1">
      </rect>
    </svg>
    <svg *ngIf="afficheFenetre">
      <rect [attr.x]="XFenetreDroite+5" y="10" [attr.width]="charttemplate.clientWidth-XFenetreDroite" height="135" stroke="#C0C0C0" stroke-width="0" fill-opacity="0.1" strock-opacity="0.1">
      </rect>
    </svg>
    <svg class="ligne ligne-verticale ligne-position" [attr.x]="XPosition" y="10" width="10" height="135" (mousedown)="mouseDown($event)" (mouseup)="mouseUp($event)" (click)="ligneClick($event)">
        <rect
          x="0"
          y="0"
          width="10"
          height="100%"
          strocke="FF0000"
          stroke-width="1"
          fill-opacity="0"
          stroke-opacity="0"
        ></rect>
        <line
          x1="5"
          y1="0"
          x2="5"
          y2="135"
          stroke="#000000"
          stroke-width="3"
          stroke-dasharray="5, 5"
        ></line>
      </svg>
      <svg class="ligne ligne-horizontale ligne-seuil" x="30" [attr.y]="YSeuil" width="100%" height="10" (mousedown)="mouseDown($event)" (mouseup)="mouseUp($event)" (click)="ligneClick($event)">
        <rect
          x="0"
          y="0"
          width="100%"
          height="10"
          strocke="FF0000"
          stroke-width="1"
          fill-opacity="0"
          stroke-opacity="0"
        ></rect>
        <line
          x1="0"
          y1="5"
          x2="100%"
          y2="5"
          stroke="#FF0000"
          stroke-width="2"
        ></line>
      </svg>
      <svg *ngIf="afficheFenetre" class="ligne ligne-verticale ligne-gauche" [attr.x]="XFenetreGauche" y="10" width="10" height="135" (mousedown)="mouseDown($event)" (mouseup)="mouseUp($event)" (click)="ligneClick($event)">
        <rect
          x="0"
          y="0"
          width="10"
          height="100%"
          strocke="FF0000"
          stroke-width="1"
          fill-opacity="0"
          stroke-opacity="0"
        ></rect>
        <line
          x1="5"
          y1="0"
          x2="5"
          y2="135"
          stroke="#000000"
          stroke-width="3"
        ></line>
      </svg>
      <svg *ngIf="afficheFenetre" class="ligne ligne-verticale ligne-droite" [attr.x]="XFenetreDroite" y="10" width="10" height="135" (mousedown)="mouseDown($event)" (mouseup)="mouseUp($event)" (click)="ligneClick($event)">
        <rect
          x="0"
          y="0"
          width="10"
          height="100%"
          strocke="FF0000"
          stroke-width="1"
          fill-opacity="0"
          stroke-opacity="0"
        ></rect>
        <line
          x1="5"
          y1="0"
          x2="5"
          y2="135"
          stroke="#000000"
          stroke-width="3"
        ></line>
      </svg>
    </svg>
</div>
