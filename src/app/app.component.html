<app-control
  [estOK]="estOK"
  [iPosition]="iPosition"
  [vSeuil]="vSeuil"
  [fenetre]="fenetre"
  [afficheFenetre]="!(visuStats && iStat > -1)"
  (positionChange)="majPosition($event)"
  (seuilChange)="majSeuil($event)"
  (fenetreChange)="majFenetre()"
  (visuStatsChange)="majVisuStats($event)"
  (visuChutesChange)="majVisuChutes($event)"
  (visuGraphDistanceChange)="majVisuGraphDistance($event)"
  (visuGraphTempsChange)="majVisuGraphTemps($event)"
></app-control>
<div class="container">
  <div class="map-container">
    <app-map
      *ngIf="estOK"
      [iPosition]="iPosition"
      [vSeuil]="vSeuil"
      [visuStats]="visuStats"
      [visuChutes]="visuChutes"
      [iStat]="iStat"
      [calculStatOk]="calculStatsOk"
      [fenetre]="fenetre"
      (positionChange)="majPosition($event)"
      (iStatChange)="majiStat($event)"
    ></app-map>
  </div>
  <div class="charts-container">
    <app-chart
      *ngIf="visuGraphDistance && estOK && !ecranMini"
      [iPosition]="iPosition"
      [vSeuil]="vSeuil"
      [fenetre]="fenetre"
      [visuStats]="visuStats"
      [visuChutes]="visuChutes"
      [iStat]="iStat"
      [afficheFenetre]="!(visuStats && iStat > -1)"
      (positionChange)="majPosition($event)"
      (seuilChange)="majSeuil($event)"
      (fenetreChange)="majFenetre()"
    ></app-chart>
    <app-chart
      *ngIf="visuGraphTemps && estOK && !ecranMini"
      [modeTemps]="true"
      [iPosition]="iPosition"
      [vSeuil]="vSeuil"
      [fenetre]="fenetre"
      [visuStats]="visuStats"
      [visuChutes]="visuChutes"
      [iStat]="iStat"
      [afficheFenetre]="!(visuStats && iStat > -1)"
      (positionChange)="majPosition($event)"
      (seuilChange)="majSeuil($event)"
      (fenetreChange)="majFenetre()"
    ></app-chart>
  </div>
</div>
<app-stat 
  *ngIf="estOK"
  [bottom]="130 + (visuGraphDistance ? 170 : 0) + (visuGraphTemps ? 170 : 0)"
  [visuStats]="visuStats"
  [iStat]="iStat"
  (calculOkChange)="majCalculStatsOk($event)"
  (iStatChange)="majiStat($event)"
  (positionChange)="majPosition($event)"
></app-stat>
